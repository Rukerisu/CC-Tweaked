-- Vyhľadanie monitora a BigReactors Energizer
local monitor, cell

for _, name in ipairs(peripheral.getNames()) do
    local pType = peripheral.getType(name)
    if pType == "monitor" then
        monitor = peripheral.wrap(name)
    elseif pType and pType:lower():find("bigreactors%-energizer") then
        cell = peripheral.wrap(name)
    end
end

-- Kontrola
if not monitor then error("Monitor not found") end
if not cell then error("BigReactors Energizer not found") end

-- Nastavenie monitora pre malý displej
monitor.setTextScale(2)  -- zmenší počet znakov ale zväčší písmo
local w, h = monitor.getSize()

-- Formátovanie čísel
local function formatRF(value)
    if value >= 1e9 then
        return string.format("%.2fB RF", value / 1e9)
    elseif value >= 1e6 then
        return string.format("%.1fM RF", value / 1e6)
    elseif value >= 1e3 then
        return string.format("%.0fk RF", value / 1e3)
    else
        return string.format("%d RF", value)
    end
end

-- Hlavný cyklus
while true do
    local energy = cell.getEnergy()
    local maxEnergy = cell.getEnergyCapacity()

    monitor.clear()
    monitor.setCursorPos(1, math.floor(h / 2))

    local line = formatRF(energy) .. " / " .. formatRF(maxEnergy)
    local startX = math.floor((w - #line) / 2) + 1
    monitor.setCursorPos(startX, math.floor(h / 2))
    monitor.write(line)

    sleep(1)
end
